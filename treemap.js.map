{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/treemap.js","webpack:///./src/treemap.css?4afa","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./src/treemap.css","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/d3-selection/src/selector.js","webpack:///./node_modules/d3-selection/src/selectorAll.js","webpack:///./node_modules/d3-selection/src/selection/sparse.js","webpack:///./node_modules/d3-selection/src/selection/enter.js","webpack:///./node_modules/d3-selection/src/selection/data.js","webpack:///./node_modules/d3-selection/src/selection/sort.js","webpack:///./node_modules/d3-selection/src/selection/call.js","webpack:///./node_modules/d3-selection/src/namespaces.js","webpack:///./node_modules/d3-selection/src/namespace.js","webpack:///./node_modules/d3-selection/src/selection/attr.js","webpack:///./node_modules/d3-selection/src/window.js","webpack:///./node_modules/d3-selection/src/selection/style.js","webpack:///./node_modules/d3-selection/src/selection/property.js","webpack:///./node_modules/d3-selection/src/selection/classed.js","webpack:///./node_modules/d3-selection/src/selection/text.js","webpack:///./node_modules/d3-selection/src/selection/html.js","webpack:///./node_modules/d3-selection/src/selection/raise.js","webpack:///./node_modules/d3-selection/src/selection/lower.js","webpack:///./node_modules/d3-selection/src/creator.js","webpack:///./node_modules/d3-selection/src/selection/insert.js","webpack:///./node_modules/d3-selection/src/selection/remove.js","webpack:///./node_modules/d3-selection/src/selection/clone.js","webpack:///./node_modules/d3-selection/src/selection/on.js","webpack:///./node_modules/d3-selection/src/selection/dispatch.js","webpack:///./node_modules/d3-selection/src/selection/index.js","webpack:///./node_modules/d3-selection/src/selection/select.js","webpack:///./node_modules/d3-selection/src/selection/selectAll.js","webpack:///./node_modules/d3-selection/src/selection/filter.js","webpack:///./node_modules/d3-selection/src/matcher.js","webpack:///./node_modules/d3-selection/src/constant.js","webpack:///./node_modules/d3-selection/src/selection/exit.js","webpack:///./node_modules/d3-selection/src/selection/join.js","webpack:///./node_modules/d3-selection/src/selection/merge.js","webpack:///./node_modules/d3-selection/src/selection/order.js","webpack:///./node_modules/d3-selection/src/selection/nodes.js","webpack:///./node_modules/d3-selection/src/selection/node.js","webpack:///./node_modules/d3-selection/src/selection/size.js","webpack:///./node_modules/d3-selection/src/selection/empty.js","webpack:///./node_modules/d3-selection/src/selection/each.js","webpack:///./node_modules/d3-selection/src/selection/append.js","webpack:///./node_modules/d3-selection/src/selection/datum.js","webpack:///./node_modules/d3-selection/src/select.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/count.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/index.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/each.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/eachAfter.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/eachBefore.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/sum.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/sort.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/path.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/ancestors.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/descendants.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/leaves.js","webpack:///./node_modules/d3-hierarchy/src/hierarchy/links.js","webpack:///./node_modules/d3-hierarchy/src/treemap/round.js","webpack:///./node_modules/d3-hierarchy/src/treemap/dice.js","webpack:///./node_modules/d3-hierarchy/src/treemap/slice.js","webpack:///./node_modules/d3-hierarchy/src/treemap/squarify.js","webpack:///./node_modules/d3-hierarchy/src/accessors.js","webpack:///./node_modules/d3-hierarchy/src/constant.js","webpack:///./node_modules/d3-hierarchy/src/treemap/index.js","webpack:///./node_modules/d3-collection/src/map.js","webpack:///./node_modules/d3-collection/src/nest.js","webpack:///./node_modules/d3-collection/src/set.js","webpack:///./node_modules/d3-scale/src/init.js","webpack:///./node_modules/d3-scale/src/ordinal.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","d3","default_options","showSubHeaders","section","type","label","default","numberOfLevels","cellColor","display","breadcrumbs","formatValue","number","parseInt","vis","options","element","config","this","style","document","createElement","head","appendChild","container","select","append","attr","tooltip","updateAsync","data","queryResponse","details","done","clearErrors","console","log","chartWidth","clientWidth","chartHeight","clientHeight","bounds","getBoundingClientRect","chartCentreX","x","width","chartCentreY","y","height","number_of_headers","dimensions","fields","dimension_like","measures","measure_like","new_options","size_by_options","length","option","push","values","color_by_options","getNewConfigOptions","trigger","vis_data","forEach","row","idx","entries","field_label","label_short","rendered","render","links","convertQueryDatasetToTreeData","hierarchy_names","getHierarchyNames","measure_names","getMeasureNames","colorScale","scaleOrdinal","range","current_branch","treemap","size","padding","depth","paddingTop","round","updateCurrentBranch","branch","keys","shift","undefined","getSize","measure","parseFloat","getBoxTip","tiptext","prop","metadata","nested_data","nest","dim","root","hierarchy","sum","sort","a","b","displayChart","remove","treemapCells","datum","selectAll","descendants","enter","x0","y0","Math","max","x1","y1","takeColorFromCellValue","getColor","on","xPosition","event","pageX","yPosition","pageY","html","getTooltip","classed","crossfilterEnabled","filterLevel","LookerCharts","Utils","toggleCrossfilter","preventDefault","pop","slice","parent","zoom","classCentered","cell_string","display_value","join","getCellText","divName","getDivName","createTreemap","looker","plugins","visualizations","add","api","content","locals","memo","isOldIE","Boolean","window","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","e","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","list","idCountMap","identifiers","item","id","base","count","concat","index","obj","css","media","sourceMap","references","updater","addStyle","insertStyleElement","attributes","nonce","setAttribute","insert","Error","textStore","replaceText","replacement","filter","applyToSingletonTag","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","lastIdentifiers","newList","toString","newLastIdentifiers","_i","_index","splice","___CSS_LOADER_API_IMPORT___","useSourceMap","map","cssMapping","sourceMapping","base64","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","none","selector","empty","Array","EnterNode","ownerDocument","namespaceURI","_next","_parent","__data__","constructor","child","next","querySelectorAll","bindIndex","group","exit","node","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","ascending","NaN","xhtml","svg","xlink","xml","xmlns","prefix","indexOf","namespaces","space","local","attrRemove","attrRemoveNS","fullname","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","v","apply","arguments","attrFunctionNS","defaultView","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","getPropertyValue","getComputedStyle","propertyRemove","propertyConstant","propertyFunction","classArray","string","trim","split","classList","ClassList","_node","_names","getAttribute","classedAdd","names","classedRemove","classedTrue","classedFalse","classedFunction","contains","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","lower","previousSibling","creatorInherit","uri","documentElement","createElementNS","creatorFixed","namespace","constantNull","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","filterEvents","mouseenter","mouseleave","filterContextListener","listener","contextListener","related","relatedTarget","compareDocumentPosition","event1","event0","parseTypenames","typenames","onRemove","typename","__on","j","removeEventListener","capture","onAdd","wrap","addEventListener","dispatchEvent","params","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","Selection","groups","parents","_groups","_parents","subgroups","subnode","subgroup","match","matches","each","enterGroup","updateGroup","previous","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","merge","order","groups0","groups1","selection","m0","m1","min","merges","group0","group1","compareNode","compare","sortgroups","sortgroup","callback","nodes","getAttributeNS","text","creator","before","deep","dispatch","children","childs","Node","valued","defaultChildren","eachBefore","computeHeight","copyData","eachAfter","current","reverse","path","start","ancestor","aNodes","ancestors","bNodes","leastCommonAncestor","end","k","leaves","copy","squarify","ratio","nodeValue","dx","dy","sumValue","minValue","maxValue","newRatio","minRatio","alpha","beta","rows","dice","squarifyRatio","custom","sqrt","required","f","constantZero","tile","paddingStack","paddingInner","paddingRight","paddingBottom","paddingLeft","positionNode","paddingOuter","set","isArray","has","clear","sortValues","rollup","sortKeys","array","createResult","setResult","valuesByKey","createObject","setObject","createMap","setMap","sortKey","Set","proto","initRange","domain","implicit","ordinal","Map","unknown","scale","_","from"],"mappings":"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","file":"treemap.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const d3 = require('./d3loader')\n\nimport './treemap.css';\n\nconst defaultHeaderColor = \"#f0f0f0\";\nconst defaultCellColor = \"#b3b3b3\";\n\nconst default_options = {\n  showSubHeaders: {\n    section: \"Data\",\n    type: \"boolean\",\n    label: \"Show Sub Headers\",\n    default: \"true\"\n  },\n  numberOfLevels: {\n    section: \"Data\",\n    type: \"number\",\n    label: \"Number of levels to show\",\n    default: 2\n  },\n  cellColor: {\n    section: \"Data\",\n    type: \"array\",\n    display: \"colors\",\n    label: \"Color Palette - Razorhorse\",\n    default: [\"#aa4336\", \"#b04f43\", \"#b4574c\", \"#b86157\", \"#bc6960\", \"#c07169\", \"#c47b73\", \"#c8837c\", \"#cc8c86\", \"#d09590\", \"#d59f9b\", \"#daaaa8\"]\n  },\n  breadcrumbs: {\n    type: \"array\",\n    default: [],\n  },\n};\n\nconst timeout = null;\n\n//Temp\n// const dumpToConsole = function(message, obj) {\n//     console.log(message, JSON.stringify(obj, null, 2));\n// }\n\nconst formatValue = function(number) {\n    return parseInt(number);\n}\n\nconst convertQueryDatasetToTreeData = function(data, queryResponse) {\n    var vis_data = [];\n    data.forEach(d => {\n        var row = {};\n        var idx = 0;\n        row['metadata'] = {};\n        for (var [key, value] of Object.entries(d)) {\n            row[key] = value.value;\n\n            if (idx < queryResponse.fields.dimension_like.length) {\n                var field_label = queryResponse.fields.dimension_like[idx].label_short;\n            } else {\n                var field_label = queryResponse.fields.measure_like[idx - queryResponse.fields.dimension_like.length].label_short;\n            }\n\n            if (typeof value.rendered !== 'undefined') {\n                var render = value.rendered\n            } else {\n                var render = value.value\n            }\n            row['metadata'][key] = {\n                label: field_label,\n                rendered: render,\n                links: value.links,\n            }\n            idx += 1;\n        }\n        vis_data.push(row);\n    });\n    return vis_data;\n}\n\nconst getHierarchyNames = function(queryResponse) {\n    var hierarchy_names = [];\n    queryResponse.fields.dimension_like.forEach(d => {\n        hierarchy_names.push(d.name);\n    });\n    return hierarchy_names;\n}\n\nconst getMeasureNames = function(queryResponse) {\n    var measures = [];\n    queryResponse.fields.measure_like.forEach(d => {\n        measures.push(d.name);\n    })\n    return measures;\n}\n\nconst getNewConfigOptions = function(dimensions, measures) {\n    var new_options = default_options;\n\n    var size_by_options = [];\n    for (var i = 0; i < measures.length; i++) {\n        var option = {};\n        // option[measures[i]] = i.toString();\n        option[measures[i].label] = measures[i].name;\n        size_by_options.push(option);\n    }\n    //size_by_options.push({\"Count of Rows (TBD)\": \"count_of_rows\"});\n\n    new_options[\"sizeBy\"] = {\n        section: \"Data\",\n        type: \"string\",\n        label: \"Size By\",\n        display: \"select\",\n        values: size_by_options,\n        default: \"0\",\n    }\n\n    var color_by_options = [];\n    for (var i = 0; i < dimensions.length; i++) {\n        var option = {};\n        option[dimensions[i].label] = dimensions[i].name;\n        color_by_options.push(option)\n    }\n    // color_by_options.push({\"Color by Value (TBD)\": \"color_by_value\"});\n\n    new_options[\"colorBy\"] = {\n        section: \"Data\",\n        type: \"string\",\n        label: \"Color By\",\n        display: \"select\",\n        values: color_by_options,\n        default: \"0\",\n    }\n\n    return new_options;\n}\n\nconst vis = {\n    options: default_options,\n\n    create: function(element, config) {\n        this.style = document.createElement('style');\n        document.head.appendChild(this.style);\n\n        this.container = d3.select(element)\n            .append(\"div\")\n            .attr(\"id\", \"treemapContainer\")\n\n        this.tooltip = d3.select(element)\n            .append(\"div\")\n            .attr(\"class\", \"hidden\")\n            .attr(\"id\", \"tooltip\")\n    },\n\n    updateAsync: function(data, element, config, queryResponse, details, done) {\n        this.clearErrors();\n\n        console.log('data', data)\n        console.log('config', config)\n        console.log('queryResponse', queryResponse)\n\n        const chartWidth = element.clientWidth;\n        const chartHeight = element.clientHeight - 16;\n        \n        const bounds = element.getBoundingClientRect()\n        const chartCentreX = bounds.x + (bounds.width / 2);\n        const chartCentreY = bounds.y + (bounds.height / 2);\n\n        const headerColor = defaultHeaderColor;\n        const number_of_headers = config.numberOfLevels;\n\n        const dimensions = queryResponse.fields.dimension_like;\n        const measures = queryResponse.fields.measure_like;\n        \n        const new_options = getNewConfigOptions(dimensions, measures);\n        vis.trigger(\"registerOptions\", new_options);\n\n        const vis_data = convertQueryDatasetToTreeData(data, queryResponse);\n        const hierarchy_names = getHierarchyNames(queryResponse);\n        const measure_names = getMeasureNames(queryResponse);\n        const colorScale = d3.scaleOrdinal().range(config.cellColor);  \n\n        var current_branch;\n \n        var treemap = d3.treemap()\n            .size([chartWidth, chartHeight])\n            .padding((d) => {\n                return d.depth === 1 ? 2 : 0\n            })\n            .paddingTop((d) => {\n                if (config.showSubHeaders) {\n                    return d.depth < number_of_headers ? 16 : 0\n                } else {\n                    return d.depth === 0 ? 16 : 0\n                }\n            })\n            .round(true);\n\n        const updateCurrentBranch = function(branch, keys) {\n            if (keys.length === 0) {\n                // returning final branch\n                current_branch = branch;\n            } else {\n                var key = keys.shift();\n\n                for (var value in branch.values) {\n                    if (branch !== undefined) {\n                        if (branch.values[value].key === key) {\n                            branch = updateCurrentBranch(branch.values[value], keys);\n                        }\n                    }\n                }\n            };\n        }\n\n        const getSize = function(d) {\n            if (config[\"sizeBy\"] == \"count_of_rows\") {\n                return !d.key ? 1 : 0;\n            } else {\n                let measure = config[\"sizeBy\"];\n                return parseFloat(d[measure]);    \n            }\n        }\n\n        const getColor = function(d) {\n            if (d.height === 0) {\n                if (config.takeColorFromCellValue) {\n                    return d.data[config[\"colorBy\"]];\n                } else {\n                    return colorScale(d.data[config[\"colorBy\"]]);\n                }\n            } else if (d.depth === 0) {\n                return headerColor;\n            } else {\n                return defaultCellColor;\n            }\n        }\n\n        const getCellText = function(d) {\n            var cell_string = ''\n\n            if (d.depth === 0) {\n                var display_value = formatValue(d.value);\n                if (config.breadcrumbs.length === 0) {\n                    cell_string = \"Top Level. Click on cells to zoom IN, or click on this bar to zoom OUT.\"; \n                } else {\n                    if(d.value == \"null\"){\n                        cell_string = \"\";\n                    }else{\n                        cell_string = \"&#171; \"+ config.breadcrumbs.join(\"  \") + \" (\" + display_value + \")\";\n                    }\n                    \n                }\n                \n            } else if (d.depth < number_of_headers && config.showSubHeaders) {\n                display_value = formatValue(d.value);\n                if (d.data.key == null) {\n                    cell_string = '' ;\n                } else {\n                    if(d.data.key == \"null\"){\n                        cell_string = \"\";\n                    }else{\n                        //cell_string = \"<div class='navigation'>&#187; \"+ d.data.key + \" (\" + display_value + \")</div>\";\n                    }                    \n                }\n            } else if (d.height === 0) {\n                if (config[\"sizeBy\"] === \"count_of_rows\") {\n                    cell_string = \"1\";\n                } else {\n                    cell_string = getBoxTip(d) //+'<br>' + d.data.metadata[config[\"sizeBy\"]].rendered;                    \n                }\n            } \n\n            return cell_string\n        }\n\n        const getBoxTip = function(d) {\n            var tiptext = \"\";\n            if (d.height === 0) {\n                let p = 0\n                for (var prop in hierarchy_names) {\n                    var metadata = d.data.metadata[hierarchy_names[prop]];\n                    if( p > 0){\n                        if(metadata.rendered != null){\n                            tiptext += \" \" + metadata.rendered + \" &#187; \"; //<p><em>\" + metadata.label + \":</em> \n                        }\n                    }\n                    \n                    p++\n                }\n                tiptext += '<br>'\n                for (var measure in measures) {\n                    var metadata = d.data.metadata[measure_names[measure]];\n                    if(metadata.rendered != null){\n                       // tiptext += \"<p><em>\" + metadata.label + \":</em></p>\";\n                    }                    \n                }\n            } else {\n                if(d.data.key == \"null\"){\n                    tiptext += \"-\";\n                }else{\n                    tiptext += d.data.key;\n                }\n                    \n            };\n            \n            return tiptext;\n        }\n\n        const getTooltip = function(d) {\n            var tiptext = \"\";\n            if (d.height === 0) {\n                let p = 0\n                for (var prop in hierarchy_names) {\n                    var metadata = d.data.metadata[hierarchy_names[prop]];\n                    if( p > 0){\n                        if(metadata.rendered != null){\n                            tiptext += metadata.rendered + \" &#187; \"; //<p><em>\" + metadata.label + \":</em> \n                        }\n                    }\n                    p++\n                }\n                tiptext += '<br>'\n                for (var measure in measures) {\n                    var metadata = d.data.metadata[measure_names[measure]];\n                    if(metadata.rendered != null){\n                        tiptext += \"<p><em>\" + metadata.label + \":</em> <b>\" + metadata.rendered + \"</b></p>\";\n                    }                    \n                }\n            } else {\n                if(d.data.key == \"null\"){\n                    tiptext += \"\";\n                }else{\n                    tiptext += d.data.key;\n                }\n                    \n            };\n            \n            return tiptext;\n        }\n\n        const getDivName = function(d){\n            let divName;\n            if(d.depth === 0 || d.depth === 1 || d.depth === 2 || d.depth === 3){\n                divName = \"textdivMenu\"\n            }\n            else{\n                divName = \"textdiv\"\n            }\n            return divName\n        }\n\n        const createTreemap = function(data) {\n            var nested_data = d3.nest();\n            dimensions.forEach(dim => \n                nested_data = nested_data.key(d => d[dim.name]));\n            nested_data = nested_data.entries(data);\n            nested_data = {\n                \"key\": \"root\",\n                \"values\": nested_data,\n            }\n\n            var root = treemap(\n                d3.hierarchy(nested_data, d => d.values)\n                  .sum(d => getSize(d))\n                  .sort(function(a, b) { return b.height - a.height || getSize(b) - getSize(a)} )\n            );\n\n            const displayChart = function(d) {\n                d3.select(\"#treemapSVG\")\n                .remove();\n\n                var svg = d3.select(\"#treemapContainer\")\n                            .append(\"svg\")\n                            .attr(\"id\", \"treemapSVG\")\n                            .attr(\"width\", chartWidth)\n                            .attr(\"height\", chartHeight);\n\n                var treemapArea = svg.append(\"g\")\n                    .datum(d)\n                    .attr(\"class\", \"treemapArea\");\n\n                var treemapCells = treemapArea.selectAll(\"g\")\n                    .data(root.descendants())\n                    .enter()\n\n                treemapCells.append(\"rect\")\n                    .attr(\"x\", d => d.x0)\n                    .attr(\"y\", d => d.y0)\n                    .attr(\"width\", d => Math.max(0, d.x1 - d.x0)-5)\n                    .attr(\"height\", d => Math.max(0, d.y1 - d.y0))\n                    .attr(\"fill\", d => getColor(d))\n                    //.attr(\"stroke\", defaultCellColor)\n                    .style('stroke', 'black')\n                    .style('stroke-width', '0')\n                    .on(\"mouseover\", function(d) {\n\n                        // console.log('mouseover', d3.event)\n\n                        //Get this bar's x/y values, then augment for the tooltip\n                        var top_left_x = parseFloat(d3.select(this).attr(\"x\"))\n                        var top_left_y = parseFloat(d3.select(this).attr(\"y\"))\n                        \n\n                        var pageX = d3.event.pageX\n                        var pageY = d3.event.pageY\n                        // var container_y = element.attr('y')\n                        // console.log('coords', top_left_x, top_left_y, container_x, element, this, d3.event)\n\n                        var xPosition = pageX;\n                        var yPosition = pageY;\n\n                        // var xPosition = parseFloat(d3.select(this).attr(\"x\")) + 50;\n                        // var yPosition = parseFloat(d3.select(this).attr(\"y\")) + 50;\n\n                        //Update the tooltip position and value\n                        d3.select(\"#tooltip\")\n                            .style(\"left\", xPosition + \"px\")\n                            .style(\"top\", yPosition + \"px\")                   \n                            .html(getTooltip(d));\n\n                        //Show the tooltip\n                        d3.select(\"#tooltip\").classed(\"hidden\", false)\n                        d3.select(this).style('stroke', 'white');\n                        d3.select(this).style('stroke-width', '6');\n\n                    })\n                    .on(\"mousemove\", function() {\n                        var xPosition = d3.event.pageX < chartCentreX ? d3.event.pageX : d3.event.pageX - 210\n                        var yPosition = d3.event.pageY < chartCentreY ? d3.event.pageY : d3.event.pageY - 120\n\n                        if (xPosition )\n                        d3.select('#tooltip')\n                            .style('left', xPosition + 'px')\n                            .style('top', yPosition + 'px')                       \n                        \n                    })\n                    .on(\"mouseout\", function() {\n                        //Hide the tooltip\n                        d3.select(\"#tooltip\").classed(\"hidden\", true);\n                        d3.select(this).style('stroke', 'black');\n                        d3.select(this).style('stroke-width', '0');\n                    })\n                    \n                    // .on(\"dblclick\", d => { \n\n                    //     clearTimeout(timeout);\n    \n                    //     // console.clear();\n                    //     // console.log(\"node was double clicked\", new Date());                        \n                    //     //alert(\"node was double clicked\") \n                    //     zoom(d)\n                    // })\n\n                    .on('click', d => {\n                        // console.log('click d.data', d.data)\n                        // console.log('dimensions', dimensions)\n\n                            \n                        // timeout = setTimeout(function() {\n                        //     console.clear();\n                        //     console.log(\"node was single clicked\", new Date());\n\n                        //     if (details.crossfilterEnabled) {\n                        //         let cross_filter_dimension  // dimension to cross-filter\n                        //         let pseudoRow = {}          // fake 'row' object to send to cross filter api\n        \n                        //         // Test whether use has clicked on a 'heading' or a 'tile'\n                        //         // to decide whether to cross-filter on first or second dimension \n                        //         if ('key' in d.data && 'values' in d.data) {\n                        //           cross_filter_dimension = dimensions[0].name\n                        //           pseudoRow[cross_filter_dimension] = { value: d.data.key }\n                        //         } else {\n                        //           cross_filter_dimension = dimensions[1].name\n                        //           pseudoRow[cross_filter_dimension] = { value: d.data[cross_filter_dimension] }\n                        //         }\n                        //         console.log('pseudoRow', pseudoRow)\n                                \n                        //         LookerCharts.Utils.toggleCrossfilter({\n                        //             row: pseudoRow,\n                        //             event: d3.event,\n                        //         });\n                        //       } else {\n                        //         let event = {\n                        //           metaKey: d3.event.metaKey,\n                        //           pageX: d3.event.pageX,\n                        //           pageY: d3.event.pageY - window.pageYOffset\n                        //         }\n                      \n                        //         LookerCharts.Utils.openDrillMenu({\n                        //           links: d.links,\n                        //           event: event\n                        //         })          \n                        //       }\n\n\n                        // }, 300)\n\n                        console.log(\"d\", d)\n                        console.log(\"d.row\", d3.event)\n                        console.log(\"details.crossfilterEnabled\", details.crossfilterEnabled)\n                        console.log(\"d.row\", d.data[\"taxonomy.sub_sector_level_2\"])\n                        console.log(\"d.row\", d3.event)\n                        let data = ''\n                        let filterLevel = ''\n\n\n                        if(d.depth === 4)\n                        {\n                            filterLevel = \"taxonomy.sub_sector_level_3\"\n                            data = {\n                                [filterLevel] : { value: d.data[filterLevel]}\n                            }\n                        }\n                        if(d.depth === 3)\n                        {\n                            filterLevel = \"taxonomy.sub_sector_level_3\"\n                            data = {\n                                [filterLevel] : { value: d.data[filterLevel]}\n                            }\n                        }\n                        if(d.depth === 2)\n                        {\n                            filterLevel = \"taxonomy.sub_sector_level_4\"\n                            data = {\n                                [filterLevel] : { value: d.data.key}\n                            }\n                        }\n                        if(d.depth === 1)\n                        {\n                            filterLevel = \"taxonomy.sub_sector_level_2\"\n                            data = {\n                                [filterLevel] : { value: d.data.key}\n                            }\n                        }\n\n\n                        // let data = {\n                        //     [filterLevel] : [filterLevel] \n                        // }\n\n                        if (details.crossfilterEnabled) {   \n                            //zoom(d)\n                            LookerCharts.Utils.toggleCrossfilter({row: data})\n                        } \n\n                        // if(d.depth === 1)\n                        // {\n                        //     zoom(d)\n                        // }\n                        // if(d.depth === 0)\n                        // {\n                        //     zoom(d)\n                        // }\n\n                        //zoom(d)\n     \n                       \n                    })\n                    \n                    .on('contextmenu', d => {\n                        event.preventDefault();\n                        zoom(d)\n\n                        // if (details.crossfilterEnabled) {\n                        //   event.preventDefault()\n                        //   // TODO: this should be based on the sizeBy measure\n                        //   let measure = measures[0].name\n  \n                        //   LookerCharts.Utils.openDrillMenu({\n                        //     links: d.data.metadata[measure].links,\n                        //     event: event\n                        //   }) \n                        // }\n                      })\n\n                \n                    let classCentered = ''\n                        \n                    // console.log(\"d.depth\", d.depth, getCellText(d))\n\n                    if(d.depth === 0 || d.depth === 1){\n                        classCentered = 'textdivMenu'\n                    }\n                    else{\n                        classCentered = \"textdiv\"\n                    }\n\n                    treemapCells.append(\"foreignObject\")\n                        .attr(\"x\", d => d.x0 + 3)\n                        .attr(\"y\", d => d.y0)\n                        .attr(\"width\", d => Math.max(0, d.x1 - d.x0 - 3))\n                        .attr(\"height\", d => Math.max(0, d.y1 - d.y0))\n                        .attr(\"fill\", '#bbbbbb')\n                        .attr(\"class\", \"foreignobj\")\n                        .attr(\"pointer-events\", \"none\")\n                        .attr(\"white-space\", \"nowrap\")                            \n                    .append(\"xhtml:div\")\n                        .html(d => getCellText(d))\n                        .attr(\"class\", (d) => getDivName(d))\n                    \n                        \n                                    \n                    function zoom(d) {\n                        if (d.depth === 0) {\n                            if (config.breadcrumbs.length === 0) {\n                                // zoom cancelled, already at root node\n                            } else {\n                                config.breadcrumbs.pop();\n                                // zoom up\n                                updateCurrentBranch(nested_data, config.breadcrumbs.slice(0));\n\n                                root = treemap(d3.hierarchy(current_branch, d => d.values)\n                                    .sum(d => getSize(d)))\n                                displayChart(root);\n                            }\n                        } else {\n                            while (d.depth > 1) {\n                                d = d.parent;\n                            }\n                            if (d.data.key != null) {\n                                config.breadcrumbs.push(d.data.key);\n                                // zoom down\n                                root = treemap(d3.hierarchy(d.data, d => d.values)\n                                    .sum(d => getSize(d))\n                                );\n                                \n                                displayChart(root);                            \n                            }\n                        }\n                    }\n            }\n\n            displayChart(root);\n        }\n        \n        createTreemap(vis_data);\n        done();\n    }\n};\n\nlooker.plugins.visualizations.add(vis);","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./treemap.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"rect {\\n    border: 1px solid transparent;\\n    pointer-events: all;\\n}\\nrect:hover {\\n    border: 1px solid black;\\n}\\n\\n#tooltip {\\n    position: absolute;\\n    width: auto;\\n    height: auto;\\n    padding: 5px;\\n    background-color: white;\\n    -webkit-border-radius: 4px;\\n    -moz-border-radius: 4px;\\n    border-radius: 4px;\\n    -webkit-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);\\n    -moz-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);\\n    box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);\\n    pointer-events: none;\\n    font-family: sans-serif;\\n    font-size: 12px;\\n}\\n\\n#tooltip:hover {\\n    background-color: #aa4336;\\n}\\n\\n\\n#tooltip.hidden {\\n    display: none;\\n}\\n\\n#tooltip p {\\n    margin: 0;\\n    font-family: sans-serif;\\n    font-size: 12px;\\n    line-height: 15px;\\n}\\n\\n.textdiv {\\n    border: 1px solid transparent;\\n    font-family: 'Roboto', \\\"Open Sans\\\",Helvetica,Arial,sans-serif;\\n    font-size: 12px;\\n    pointer-events: none;\\n    overflow: none;    \\n    word-wrap: break-word;\\n    position: relative;\\n    text-align: center;\\n    top: 50%;\\n    color: #1a1a1a;\\n}\\n\\n.textdivMenu {\\n    font-family: 'Roboto', \\\"Open Sans\\\",Helvetica,Arial,sans-serif;\\n    font-size: 11px;\\n    text-align: center;\\n    color: #1a1a1a;\\n}\\n\\n.textdiv:hover {\\n    border: 1px solid #000;\\n    stroke: black;\\n}\\n\\n\\n.foreignobj{\\n    border: 1px solid transparent;\\n    padding-left: 5px;\\n    padding-top: 0px;\\n    margin-top: 5px;\\n    word-wrap: break-word;\\n}\\n\\n\\n.foreignobj:hover{  \\n    border: 1px black;\\n}\\n\\n.navigation{\\n    white-space: nowrap;\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_join from \"./join\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n","import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\n\nexport default function hierarchy(data, children) {\n  var root = new Node(data),\n      valued = +data.value && (root.value = data.value),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  if (children == null) children = defaultChildren;\n\n  while (node = nodes.pop()) {\n    if (valued) node.value = +node.data.value;\n    if ((childs = children(node.data)) && (n = childs.length)) {\n      node.children = new Array(n);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction defaultChildren(d) {\n  return d.children;\n}\n\nfunction copyData(node) {\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy\n};\n","export default function(callback) {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      callback(node), children = node.children;\n      if (children) for (i = 0, n = children.length; i < n; ++i) {\n        next.push(children[i]);\n      }\n    }\n  } while (next.length);\n  return this;\n}\n","export default function(callback) {\n  var node = this, nodes = [node], next = [], children, i, n;\n  while (node = nodes.pop()) {\n    next.push(node), children = node.children;\n    if (children) for (i = 0, n = children.length; i < n; ++i) {\n      nodes.push(children[i]);\n    }\n  }\n  while (node = next.pop()) {\n    callback(node);\n  }\n  return this;\n}\n","export default function(callback) {\n  var node = this, nodes = [node], children, i;\n  while (node = nodes.pop()) {\n    callback(node), children = node.children;\n    if (children) for (i = children.length - 1; i >= 0; --i) {\n      nodes.push(children[i]);\n    }\n  }\n  return this;\n}\n","export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n","export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n","export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n","export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n","export default function() {\n  var nodes = [];\n  this.each(function(node) {\n    nodes.push(node);\n  });\n  return nodes;\n}\n","export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n","export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Dont include the roots parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n","export default function(node) {\n  node.x0 = Math.round(node.x0);\n  node.y0 = Math.round(node.y0);\n  node.x1 = Math.round(node.x1);\n  node.y1 = Math.round(node.y1);\n}\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (x1 - x0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.y0 = y0, node.y1 = y1;\n    node.x0 = x0, node.x1 = x0 += node.value * k;\n  }\n}\n","export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (y1 - y0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.x0 = x0, node.x1 = x1;\n    node.y0 = y0, node.y1 = y0 += node.value * k;\n  }\n}\n","import treemapDice from \"./dice.js\";\nimport treemapSlice from \"./slice.js\";\n\nexport var phi = (1 + Math.sqrt(5)) / 2;\n\nexport function squarifyRatio(ratio, parent, x0, y0, x1, y1) {\n  var rows = [],\n      nodes = parent.children,\n      row,\n      nodeValue,\n      i0 = 0,\n      i1 = 0,\n      n = nodes.length,\n      dx, dy,\n      value = parent.value,\n      sumValue,\n      minValue,\n      maxValue,\n      newRatio,\n      minRatio,\n      alpha,\n      beta;\n\n  while (i0 < n) {\n    dx = x1 - x0, dy = y1 - y0;\n\n    // Find the next non-empty node.\n    do sumValue = nodes[i1++].value; while (!sumValue && i1 < n);\n    minValue = maxValue = sumValue;\n    alpha = Math.max(dy / dx, dx / dy) / (value * ratio);\n    beta = sumValue * sumValue * alpha;\n    minRatio = Math.max(maxValue / beta, beta / minValue);\n\n    // Keep adding nodes while the aspect ratio maintains or improves.\n    for (; i1 < n; ++i1) {\n      sumValue += nodeValue = nodes[i1].value;\n      if (nodeValue < minValue) minValue = nodeValue;\n      if (nodeValue > maxValue) maxValue = nodeValue;\n      beta = sumValue * sumValue * alpha;\n      newRatio = Math.max(maxValue / beta, beta / minValue);\n      if (newRatio > minRatio) { sumValue -= nodeValue; break; }\n      minRatio = newRatio;\n    }\n\n    // Position and record the row orientation.\n    rows.push(row = {value: sumValue, dice: dx < dy, children: nodes.slice(i0, i1)});\n    if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += dy * sumValue / value : y1);\n    else treemapSlice(row, x0, y0, value ? x0 += dx * sumValue / value : x1, y1);\n    value -= sumValue, i0 = i1;\n  }\n\n  return rows;\n}\n\nexport default (function custom(ratio) {\n\n  function squarify(parent, x0, y0, x1, y1) {\n    squarifyRatio(ratio, parent, x0, y0, x1, y1);\n  }\n\n  squarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return squarify;\n})(phi);\n","export function optional(f) {\n  return f == null ? null : required(f);\n}\n\nexport function required(f) {\n  if (typeof f !== \"function\") throw new Error;\n  return f;\n}\n","export function constantZero() {\n  return 0;\n}\n\nexport default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import roundNode from \"./round.js\";\nimport squarify from \"./squarify.js\";\nimport {required} from \"../accessors.js\";\nimport constant, {constantZero} from \"../constant.js\";\n\nexport default function() {\n  var tile = squarify,\n      round = false,\n      dx = 1,\n      dy = 1,\n      paddingStack = [0],\n      paddingInner = constantZero,\n      paddingTop = constantZero,\n      paddingRight = constantZero,\n      paddingBottom = constantZero,\n      paddingLeft = constantZero;\n\n  function treemap(root) {\n    root.x0 =\n    root.y0 = 0;\n    root.x1 = dx;\n    root.y1 = dy;\n    root.eachBefore(positionNode);\n    paddingStack = [0];\n    if (round) root.eachBefore(roundNode);\n    return root;\n  }\n\n  function positionNode(node) {\n    var p = paddingStack[node.depth],\n        x0 = node.x0 + p,\n        y0 = node.y0 + p,\n        x1 = node.x1 - p,\n        y1 = node.y1 - p;\n    if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n    if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n    node.x0 = x0;\n    node.y0 = y0;\n    node.x1 = x1;\n    node.y1 = y1;\n    if (node.children) {\n      p = paddingStack[node.depth + 1] = paddingInner(node) / 2;\n      x0 += paddingLeft(node) - p;\n      y0 += paddingTop(node) - p;\n      x1 -= paddingRight(node) - p;\n      y1 -= paddingBottom(node) - p;\n      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n      tile(node, x0, y0, x1, y1);\n    }\n  }\n\n  treemap.round = function(x) {\n    return arguments.length ? (round = !!x, treemap) : round;\n  };\n\n  treemap.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], treemap) : [dx, dy];\n  };\n\n  treemap.tile = function(x) {\n    return arguments.length ? (tile = required(x), treemap) : tile;\n  };\n\n  treemap.padding = function(x) {\n    return arguments.length ? treemap.paddingInner(x).paddingOuter(x) : treemap.paddingInner();\n  };\n\n  treemap.paddingInner = function(x) {\n    return arguments.length ? (paddingInner = typeof x === \"function\" ? x : constant(+x), treemap) : paddingInner;\n  };\n\n  treemap.paddingOuter = function(x) {\n    return arguments.length ? treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x) : treemap.paddingTop();\n  };\n\n  treemap.paddingTop = function(x) {\n    return arguments.length ? (paddingTop = typeof x === \"function\" ? x : constant(+x), treemap) : paddingTop;\n  };\n\n  treemap.paddingRight = function(x) {\n    return arguments.length ? (paddingRight = typeof x === \"function\" ? x : constant(+x), treemap) : paddingRight;\n  };\n\n  treemap.paddingBottom = function(x) {\n    return arguments.length ? (paddingBottom = typeof x === \"function\" ? x : constant(+x), treemap) : paddingBottom;\n  };\n\n  treemap.paddingLeft = function(x) {\n    return arguments.length ? (paddingLeft = typeof x === \"function\" ? x : constant(+x), treemap) : paddingLeft;\n  };\n\n  return treemap;\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import map from \"./map\";\n\nexport default function() {\n  var keys = [],\n      sortKeys = [],\n      sortValues,\n      rollup,\n      nest;\n\n  function apply(array, depth, createResult, setResult) {\n    if (depth >= keys.length) {\n      if (sortValues != null) array.sort(sortValues);\n      return rollup != null ? rollup(array) : array;\n    }\n\n    var i = -1,\n        n = array.length,\n        key = keys[depth++],\n        keyValue,\n        value,\n        valuesByKey = map(),\n        values,\n        result = createResult();\n\n    while (++i < n) {\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n        values.push(value);\n      } else {\n        valuesByKey.set(keyValue, [value]);\n      }\n    }\n\n    valuesByKey.each(function(values, key) {\n      setResult(result, key, apply(values, depth, createResult, setResult));\n    });\n\n    return result;\n  }\n\n  function entries(map, depth) {\n    if (++depth > keys.length) return map;\n    var array, sortKey = sortKeys[depth - 1];\n    if (rollup != null && depth >= keys.length) array = map.entries();\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n  }\n\n  return nest = {\n    object: function(array) { return apply(array, 0, createObject, setObject); },\n    map: function(array) { return apply(array, 0, createMap, setMap); },\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n    key: function(d) { keys.push(d); return nest; },\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n    sortValues: function(order) { sortValues = order; return nest; },\n    rollup: function(f) { rollup = f; return nest; }\n  };\n}\n\nfunction createObject() {\n  return {};\n}\n\nfunction setObject(object, key, value) {\n  object[key] = value;\n}\n\nfunction createMap() {\n  return map();\n}\n\nfunction setMap(map, key, value) {\n  map.set(key, value);\n}\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume its an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new Map(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new Map();\n    for (const value of _) {\n      const key = value + \"\";\n      if (index.has(key)) continue;\n      index.set(key, domain.push(value));\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n"],"sourceRoot":""}